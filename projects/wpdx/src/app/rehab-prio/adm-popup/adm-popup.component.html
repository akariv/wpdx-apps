<div>
    <p>
        <label><mat-icon>place</mat-icon></label> 
        {{admPopupSections[0].NAME_0}}
        <ng-container *ngIf='popupProperties.NAME_1'>
            &gt; {{popupProperties.NAME_1}}
            <ng-container *ngIf='popupProperties.NAME_2'>
                &gt; {{popupProperties.NAME_2}}
                <ng-container *ngIf='popupProperties.NAME_3'>
                    &gt; {{popupProperties.NAME_3}}
                    <ng-container *ngIf='popupProperties.NAME_4'>
                        &gt; {{popupProperties.NAME_4}}
                    </ng-container>
                </ng-container>
            </ng-container>
        </ng-container>
        <a [href]='"https://www.google.com/maps/@" + (popupProperties.y) + "," + (popupProperties.x) + ",16z"' target='_blank'><mat-icon>launch</mat-icon></a>
    </p>
    <div class='with-title'>
        <mat-button-toggle-group #group='matButtonToggleGroup' aria-label='ADM Level' appearance='Legacy' value='0'>
            <ng-container *ngFor='let section of admPopupSections; let i = index'>
                <mat-button-toggle value={{i}} [disableRipple]='true'>{{admPopupSections[i].title}}</mat-button-toggle>
            </ng-container>
        </mat-button-toggle-group>
        <ng-container *ngIf ='admPopupSections[group.value]'>
            <h2>{{admPopupSections[group.value].title}}</h2>
            <p>
                <mat-icon>water_drop</mat-icon><label>{{admPopupSections[group.value].func_waterpoints + admPopupSections[group.value].non_func_waterpoints}} water points ({{admPopupSections[group.value].func_waterpoints}} functional)</label>
            </p>
            <p>
                <mat-icon>people</mat-icon><label>Total Population:</label>&nbsp;{{admPopupSections[group.value].total_pop | number:'1.0-0'}} ppl 
            </p>
            <p>
                <mat-icon>people</mat-icon><label>Rural Population:</label>&nbsp;{{admPopupSections[group.value].rural_pop | number:'1.0-0'}} ppl<ng-container *ngIf='admPopupSections[group.value].rural_pop'>, of which</ng-container>
            </p>
            <ng-container *ngIf='admPopupSections[group.value].rural_pop'>
                <div class='indent'>
                    <p>
                        <mat-icon>people</mat-icon><label>Served:</label>&nbsp;{{(admPopupSections[group.value].served_pop) | number:'1.0-0'}} ppl ({{((admPopupSections[group.value].served_pop/admPopupSections[group.value].total_pop)*100).toFixed(2)+"%"}})
                    </p>
                    <p>
                        <mat-icon>people</mat-icon><label>Unserved:</label>&nbsp;{{(admPopupSections[group.value].unserved_pop) | number:'1.0-0'}} ppl ({{((admPopupSections[group.value].unserved_pop/admPopupSections[group.value].total_pop)*100).toFixed(2)+"%"}})
                    </p>
                    <p>
                        <mat-icon>people</mat-icon><label>Unknown:</label>&nbsp;{{admPopupSections[group.value].uncharted_pop | number:'1.0-0'}} ppl ({{((admPopupSections[group.value].uncharted_pop/admPopupSections[group.value].total_pop)*100).toFixed(2)+"%"}})
                    </p>
                </div>
            </ng-container>
            <ng-container *ngIf='data[admPopupSections.length-1-group.value].length'>
                <mat-expansion-panel hideToggle>
                    <mat-expansion-panel-header>
                    <mat-panel-title>
                        Install Year Analysis
                    </mat-panel-title>
                    <mat-panel-description>
                        Bar graph of install years
                    </mat-panel-description>
                    </mat-expansion-panel-header>
                    
                    <app-bar [data]='data[admPopupSections.length-1-group.value]'
                    xAxisTitle='Install Year' yAxisTitle='# Water Points' [min] = 'data[admPopupSections.length-1-group.value][0]' [max] = 'data[admPopupSections.length-1-group.value][data[admPopupSections.length-1-group.value].length-1]'
                    color='#ffd580'></app-bar>
                    
                </mat-expansion-panel>
            </ng-container>
        </ng-container>
    </div>
   
</div>
