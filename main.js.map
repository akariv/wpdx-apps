{"version":3,"file":"main.js","mappings":"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","sources":["./projects/wpdx/src/app/airtable.service.ts","./projects/wpdx/src/app/app-routing.module.ts","./projects/wpdx/src/app/app.component.ts","./projects/wpdx/src/app/app.component.html","./projects/wpdx/src/app/app.module.ts","./projects/wpdx/src/app/common-components/about-panel/about-panel.component.ts","./projects/wpdx/src/app/common-components/about-panel/about-panel.component.html","./projects/wpdx/src/app/common-components/adm-search-bar/adm-search-bar.component.ts","./projects/wpdx/src/app/common-components/adm-search-bar/adm-search-bar.component.html","./projects/wpdx/src/app/common-components/adm-selector/adm-selector.component.ts","./projects/wpdx/src/app/common-components/adm-selector/adm-selector.component.html","./projects/wpdx/src/app/common-components/airtable-layout/airtable-layout.component.ts","./projects/wpdx/src/app/common-components/airtable-layout/airtable-layout.component.html","./projects/wpdx/src/app/common-components/app-layout/app-layout.component.ts","./projects/wpdx/src/app/common-components/app-layout/app-layout.component.html","./projects/wpdx/src/app/common-components/attribute-filter/attribute-filter.component.ts","./projects/wpdx/src/app/common-components/attribute-filter/attribute-filter.component.html","./projects/wpdx/src/app/common-components/bar/bar.component.ts","./projects/wpdx/src/app/common-components/bar/bar.component.html","./projects/wpdx/src/app/common-components/base-waterpoint-popup/base-waterpoint-popup.component.ts","./projects/wpdx/src/app/common-components/base-waterpoint-popup/base-waterpoint-popup.component.html","./projects/wpdx/src/app/common-components/common-components.module.ts","./projects/wpdx/src/app/common-components/controls/controls/controls.component.ts","./projects/wpdx/src/app/common-components/controls/controls/controls.component.html","./projects/wpdx/src/app/common-components/controls/custom-selector/custom-selector.component.ts","./projects/wpdx/src/app/common-components/controls/custom-selector/custom-selector.component.html","./projects/wpdx/src/app/common-components/controls/filters-control/filters-control.component.ts","./projects/wpdx/src/app/common-components/controls/filters-control/filters-control.component.html","./projects/wpdx/src/app/common-components/controls/legend-control/legend-control.component.ts","./projects/wpdx/src/app/common-components/controls/legend-control/legend-control.component.html","./projects/wpdx/src/app/common-components/logos-bar/logos-bar.component.ts","./projects/wpdx/src/app/common-components/logos-bar/logos-bar.component.html","./projects/wpdx/src/app/common-components/map-layer/map-layer.component.ts","./projects/wpdx/src/app/common-components/map-layer/map-layer.component.html","./projects/wpdx/src/app/common-components/photo-gallery/photo-gallery.component.ts","./projects/wpdx/src/app/common-components/photo-gallery/photo-gallery.component.html","./projects/wpdx/src/app/common-components/pie/pie.component.ts","./projects/wpdx/src/app/common-components/pie/pie.component.html","./projects/wpdx/src/app/common-components/side-panel/side-panel.component.ts","./projects/wpdx/src/app/common-components/side-panel/side-panel.component.html","./projects/wpdx/src/app/common-components/spark-line/spark-line.component.ts","./projects/wpdx/src/app/common-components/spark-line/spark-line.component.html","./projects/wpdx/src/app/common-components/staleness-popup-bar/staleness-popup-bar.component.ts","./projects/wpdx/src/app/common-components/staleness-popup-bar/staleness-popup-bar.component.html","./projects/wpdx/src/app/common-components/state.service.ts","./projects/wpdx/src/app/db.service.ts","./projects/wpdx/src/app/first-time.service.ts","./projects/wpdx/src/app/layout.service.ts","./projects/wpdx/src/app/main-page/main-page.component.ts","./projects/wpdx/src/app/main-page/main-page.component.html","./projects/wpdx/src/environments/environment.ts","./projects/wpdx/src/main.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport { filter, map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AirtableService {\n\n  AIRTABLE_BASE = 'https://api.airtable.com/v0';\n  BASE_WPDX_TOOLS = 'appuaFaGEiIMszJYb';\n  BASE_KEY = 'keyGX9PZzIM6ioXXa';\n\n  constructor(private http: HttpClient) {\n  }\n\n  airtableFetch(base, table, view, record?, fields?) {\n    const headers = {\n      Authorization: `Bearer ${this.BASE_KEY}`\n    };\n    let url = `${this.AIRTABLE_BASE}/${base}/${table}`;\n    let params: any = {};\n    if (record) {\n      url += `/${record}`;\n    } else {\n      params = {\n        maxRecords: 1000,\n        view,\n      };\n      if (fields) {\n        params.fields = fields;\n      }\n    }\n    return this.http.get(\n      url, {headers, params}\n    );\n  }\n\n  airtableToMapping() {\n    return map((response: any) => {\n      const ret = {};\n      response.records.forEach((i) => {\n        ret[i.fields.key] = Object.assign(i.fields, {id: i.id});\n      });\n      return ret;\n    });\n  }\n\n  airtableToArray() {\n    return map((response: any) => {\n      const ret = [];\n      response.records.forEach((i) => {\n        ret.push(Object.assign(i.fields, {id: i.id}));\n      });\n      return ret;\n    });\n  }\n\n  fetchWpdxTools() {\n    return this.airtableFetch(this.BASE_WPDX_TOOLS, 'Tool Descriptions', 'website').pipe(\n      this.airtableToMapping()\n    );\n  }\n\n  fetchLogos(logosKey) {\n    return this.airtableFetch(this.BASE_WPDX_TOOLS, 'Logos', 'website').pipe(\n      this.airtableToArray(),\n      map((logos: any[]) => logos.filter((l) => (l.tool.indexOf(logosKey) >= 0)))\n    );\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MainPageComponent } from './main-page/main-page.component';\n\nconst routes: Routes = [\n  { path: 'status-predictions', loadChildren: () => import('./data-robot/data-robot.module').then(m => m.DataRobotModule) },\n  { path: '', loadChildren: () => import('./rehab-prio/rehab-prio.module').then(m => m.RehabPrioModule) },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.less']\n})\nexport class AppComponent {\n  title = 'wpdx';\n}\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatCardModule } from '@angular/material/card';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { CommonComponentsModule } from './common-components/common-components.module';\nimport { MainPageComponent } from './main-page/main-page.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MainPageComponent,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n    AppRoutingModule,\n    CommonComponentsModule,\n    MatButtonToggleModule,\n    MatCardModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { AirtableService } from '../../airtable.service';\nimport { LayoutService } from '../../layout.service';\n\n@Component({\n  selector: 'app-about-panel',\n  templateUrl: './about-panel.component.html',\n  styleUrls: ['./about-panel.component.less']\n})\nexport class AboutPanelComponent {\n\n  @Input() open = false;\n  @Input() logosKey: string;\n  @Output() closed = new EventEmitter<void>();\n\n  constructor(public layout: LayoutService) {}\n\n  get position() {\n    return this.layout.mobile() ? 'bottom' : 'right';\n  }\n\n}\n","<app-side-panel [position]='position' [open]='open'>\n    <div class='about'>\n        <div class='close' (click)='closed.emit()'>\n            <mat-icon aria-hidden=\"false\" aria-label=\"close icon\">close</mat-icon>\n        </div>\n        <ng-content></ng-content>\n        <app-logos-bar *ngIf='logosKey' [logosKey]='logosKey'></app-logos-bar>\n    </div>\n</app-side-panel>","import { Component, OnInit, Input, EventEmitter, Output } from '@angular/core';\nimport { DbService } from '../../db.service';\nimport { StateService } from '../state.service';\nimport { HttpClient } from '@angular/common/http';\nimport {FormControl} from '@angular/forms';\nimport {forkJoin, Observable} from 'rxjs';\nimport {map, startWith} from 'rxjs/operators';\nimport { filter } from 'd3';\n\n@Component({\n  selector: 'app-adm-search-bar',\n  templateUrl: './adm-search-bar.component.html',\n  styleUrls: ['./adm-search-bar.component.less']\n})\nexport class AdmSearchBarComponent implements OnInit{\n\n  @Output() state = new EventEmitter<any>();\n  @Output() wpdx_id = new EventEmitter<any>();\n\n  searchBarControlForm = new FormControl('');\n  options = [];\n  filteredOptions: Observable<string[]>;\n  wpdx_id_regex = /^([A-Z]|[0-9]){8}\\+([A-Z]|[0-9]){3}$/;\n\n  constructor(private db: DbService) {\n  }\n\n  ngOnInit(): void {\n    forkJoin([\n      this.db.fetchByAdmLevel('adm0'),\n      this.db.fetchByAdmLevel('adm1'),\n      this.db.fetchByAdmLevel('adm2'),\n      this.db.fetchByAdmLevel('adm3'),\n      this.db.fetchByAdmLevel('adm4'),\n    ]).subscribe((results) => {\n      console.log('GOT RESULTS', results);\n      results.forEach(rows => {\n        this.processDBResults(rows);\n        this.filteredOptions = this.searchBarControlForm.valueChanges.pipe(\n          startWith(''),\n          map(value => this._filter(value || '')),\n        );\n      });\n    });\n  }\n\n  private _filter(value: string): any[] {\n    if (this.wpdx_id_regex.test(value)) {\n      const option = {\n        display: `Go to point&nbsp;&nbsp;<strong><em>${value}</em></strong>`, \n        value,\n        state: value\n      };\n      return [option];\n    }\n    const filterValue = value.toLowerCase();\n    const splittedValue = filterValue.split(' '); \n    let filteredArray = this.options;\n    for (const val of splittedValue){\n      filteredArray = filteredArray.filter(option => option.display.toLowerCase().includes(val));\n    }\n    const slicedArray = filteredArray.slice(0, 50);\n    return slicedArray;\n  }\n\n  processDBResults(items) {\n    for (const item of items){\n      const option = {\n        'display': (item.clean_adm4 ? item.clean_adm4 + ', ' : '') +\n        (item.clean_adm3 ? item.clean_adm3 + ', ': '') +\n        (item.clean_adm2 ? item.clean_adm2 + ', ': '') +\n        (item.clean_adm1 ? item.clean_adm1 + ', ': '') +\n        item.clean_country_name\n        ,\n        'state': {\n          country_name: item.clean_country_name,\n          adm1: item.clean_adm1,\n          adm2: item.clean_adm2,\n          adm3: item.clean_adm3,\n          adm4: item.clean_adm4,\n          bounds: item.bounds\n        }\n      };\n      this.options.push(option);\n    }\n  }\n\n  sendState(state) {\n    if (this.wpdx_id_regex.test(state)) {\n      this.wpdx_id.next(state);\n    } else {    \n      this.state.next(state);\n    }\n  }\n}\n","<form>\n    <mat-form-field appearance=\"outline\">\n      <mat-label>Search region or WPDx-ID</mat-label>\n      <input type=\"text\"\n             aria-label=\"Number\"\n             matInput\n             [formControl]=\"searchBarControlForm\"\n             [matAutocomplete]=\"auto\">\n      <mat-autocomplete #auto=\"matAutocomplete\">\n        <mat-option *ngFor=\"let option of filteredOptions | async\" [value]=\"option.value || option.display\" (onSelectionChange)=\"sendState(option.state)\"\n                    [innerHTML]='option.display'>\n        </mat-option>\n      </mat-autocomplete>\n    </mat-form-field>\n  </form>","import { HttpClient } from '@angular/common/http';\nimport { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { DbService } from '../../db.service';\nimport { StateService } from '../state.service';\n\n@Component({\n  selector: 'app-adm-selector',\n  templateUrl: './adm-selector.component.html',\n  styleUrls: ['./adm-selector.component.less']\n})\nexport class AdmSelectorComponent implements OnInit {\n\n  @Input() optionsUrl = '';\n  @Output() state = new EventEmitter<any>();\n\n  _countryName: any = {};\n  countryNameOptions = [];\n  _adm1: any = {};\n  adm1_options = [];\n  _adm2: any = {};\n  adm2_options = [];\n  _adm3: any = {};\n  adm3_options = [];\n  _adm4: any = {};\n  adm4_options = [];\n\n  constructor(private http: HttpClient, private db: DbService, private stateSvc: StateService) {\n  }\n\n  ngOnInit(): void {\n    if (this.optionsUrl) {\n      this.http.get(this.optionsUrl).subscribe((levels: any[]) => {\n        this.countryNameOptions = levels;\n      });\n    } else {\n      this.db.fetchAdmLevelsResult.subscribe((rows: any[]) => {\n        this.processDBResults(rows);\n      });\n    }\n  }\n\n  processDBResults(items) {\n    items = this.groupBy(items, ['clean_country_name', 'clean_adm1', 'clean_adm2', 'clean_adm3'], 'clean_adm4');\n    items = this.groupBy(items, ['clean_country_name', 'clean_adm1', 'clean_adm2'], 'clean_adm3');\n    items = this.groupBy(items, ['clean_country_name', 'clean_adm1'], 'clean_adm2');\n    items = this.groupBy(items, ['clean_country_name'], 'clean_adm1');\n    items.forEach((item) => item.value = item.clean_country_name);\n    this.countryNameOptions = items;\n    for (const l1 of this.countryNameOptions) {\n      if (l1.value === this.stateSvc.props.country_name) {\n        this._countryName = l1;\n        this.adm1_options = l1.items || [];\n        for (const l2 of this.adm1_options) {\n          if (l2.value === this.stateSvc.props.adm1) {\n            this._adm1 = l2;\n            this.adm2_options = l2.items;\n            for (const l3 of this.adm2_options) {\n              if (l3.value === this.stateSvc.props.adm2) {\n                this._adm2 = l3;\n                this.adm3_options = l3.items;\n                for (const l4 of this.adm3_options) {\n                  if (l4.value === this.stateSvc.props.adm3) {\n                    this._adm3 = l4;\n                    this.adm4_options = l4.items;\n                    for (const l5 of this.adm4_options) {\n                      if (l5.value === this.stateSvc.props.adm4) {\n                        this._adm4 = l5;\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  groupBy(items, keyFields, valueField) {\n    const ret = {};\n    for (const item_ of items) {\n      const item = Object.assign({}, item_);\n      const key = keyFields.map((f) => item[f]).join('/');\n      if (!ret[key]) {\n        ret[key] = [];\n      }\n      item.value = item[valueField];\n      if (!item.value) {\n        console.log('BAD VALUE FOR', valueField, item);\n      }\n      // if (!item.bounds) {\n      //   item.bounds = [\n      //     item.lon_min,\n      //     item.lat_min,\n      //     item.lon_max,\n      //     item.lat_max,\n      //   ];\n      // }\n      delete item[valueField];\n      ret[key].push(item);\n    }\n    const newItems = [];\n    Object.values(ret).forEach((_items) => {\n      const item: any = {};\n      item.items = _items;\n      for (const f of keyFields) {\n        item[f] = _items[0][f];\n      }\n      item.bounds = [\n        Math.min(...item.items.map(x => x.bounds[0])),\n        Math.min(...item.items.map(x => x.bounds[1])),\n        Math.max(...item.items.map(x => x.bounds[2])),\n        Math.max(...item.items.map(x => x.bounds[3])),\n      ];\n      newItems.push(item);\n    });\n    return newItems;\n  }\n\n  set country_name(value) {\n    this._countryName = value;\n    this.adm1 = {};\n    this.adm1_options = value.items || [];\n  }\n\n  get country_name() {\n    return this._countryName;\n  }\n\n  set adm1(value) {\n    this._adm1 = value;\n    this.adm2 = {};\n    this.adm2_options = value.items || [];\n  }\n\n  get adm1() {\n    return this._adm1;\n  }\n\n  set adm2(value) {\n    this._adm2 = value;\n    this.adm3 = {};\n    this.adm3_options = value.items || [];\n  }\n\n  get adm2() {\n    return this._adm2;\n  }\n\n  set adm3(value) {\n    this._adm3 = value;\n    // console.log('SET ADM3', value, value.items);\n    this.adm4 = {};\n    this.adm4_options = value.items || [];\n  }\n\n  get adm3() {\n    return this._adm3;\n  }\n\n  set adm4(value) {\n    this._adm4 = value;\n    this.sendState();\n  }\n\n  get adm4() {\n    return this._adm4;\n  }\n\n  sendState() {\n    const state = {\n      country_name: this.country_name?.value,\n      adm1: this.adm1?.value,\n      adm2: this.adm2?.value,\n      adm3: this.adm3?.value,\n      adm4: this.adm4?.value,\n      bounds: this.adm4.bounds || this.adm3.bounds || this.adm2.bounds || this.adm1.bounds || this.country_name.bounds,\n    };\n    this.state.next(state);\n  }\n\n  nonempty(x) {\n    return x !== undefined && x !== null && Object.keys(x).length > 0;\n  }\n\n  clearVisible() {\n    return this.nonempty(this.country_name) ||\n            this.nonempty(this.adm1) ||\n            this.nonempty(this.adm2) ||\n            this.nonempty(this.adm3) ||\n            this.nonempty(this.adm4);\n  }\n\n  clear() {\n    this.country_name = {};\n  }\n}\n","<mat-card>\n    <mat-card-title i18n>Region</mat-card-title>\n    <mat-card-actions>\n        <mat-label i18n>Country Name</mat-label>\n        <mat-select [(value)]='country_name'>\n            <mat-option *ngFor=\"let option of countryNameOptions\" [value]=\"option\">\n            {{option.value}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <mat-card-actions *ngIf='adm1_options && adm1_options.length'>\n        <mat-label i18n>Adm Level 1</mat-label>\n        <mat-select [(value)]='adm1'>\n            <mat-option *ngFor=\"let option of adm1_options\" [value]=\"option\">\n            {{option.value}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <mat-card-actions *ngIf='adm2_options && adm2_options.length'>\n        <mat-label i18n>Adm Level 2</mat-label>\n        <mat-select [(value)]='adm2'>\n            <mat-option *ngFor=\"let option of adm2_options\" [value]=\"option\">\n            {{option.value}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <mat-card-actions *ngIf='adm3_options && adm3_options.length'>\n        <mat-label i18n>Adm Level 3</mat-label>\n        <mat-select [(value)]='adm3'>\n            <mat-option *ngFor=\"let option of adm3_options\" [value]=\"option\">\n            {{option.value}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <mat-card-actions *ngIf='adm4_options && adm4_options.length'>\n        <mat-label i18n>Adm Level 4</mat-label>\n        <mat-select [(value)]='adm4'>\n            <mat-option *ngFor=\"let option of adm4_options\" [value]=\"option\">\n            {{option.value}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <div class='clear' (click)='clear()' [class.visible]='clearVisible()'><mat-icon>clear</mat-icon>Clear</div>\n</mat-card>","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { MatDrawer } from '@angular/material/sidenav';\n\nimport * as marked from 'marked';\nimport { AirtableService } from '../../airtable.service';\nimport { FirstTimeService } from '../../first-time.service';\nimport { LayoutService } from '../../layout.service';\n\n@Component({\n  selector: 'app-airtable-layout',\n  templateUrl: './airtable-layout.component.html',\n  styleUrls: ['./airtable-layout.component.less']\n})\nexport class AirtableLayoutComponent implements OnInit {\n\n  @Input() id: string;\n  @Input() mapStyle: string;\n  @Input() interactionLayers: string[] = [];\n  @Input() filters: {id: string; title: string; icon: string}[] = [];\n  @Input() popupProperties: any = {};\n  @Output() map = new EventEmitter<any>();\n  @Output() mapPopup = new EventEmitter<any>();\n  @Output() filterSelected = new EventEmitter<string>();\n\n  @ViewChild('drawer') drawer: MatDrawer;\n\n  marked = marked;\n\n  title = '';\n  about = '';\n  panel = '';\n  selectedFilter: string = null;\n\n  constructor(private airtable: AirtableService,\n              public layout: LayoutService,\n              private firstTime: FirstTimeService) { }\n\n  ngOnInit(): void {\n    console.log('INIT', this.id);\n    this.airtable.fetchWpdxTools().subscribe((mapping) => {\n      const settings: any = mapping[this.id];\n      this.title = settings.Title;\n      this.about = settings.About;\n    });\n    if (this.firstTime.firstTime(this.id)) {\n      this.panel = 'about';\n    }\n  }\n\n  selectFilter(id) {\n    if (this.selectedFilter === id) {\n      return;\n    }\n    this.selectedFilter = id;\n    let x = Promise.resolve(null);\n    if (this.drawer.opened) {\n      x = this.drawer.close();\n    }\n    x.then(() => {\n      this.filterSelected.emit(id);\n    }).then(() => {\n      this.drawer.open();\n    });\n  }\n\n}\n","<app-layout (info)='panel = \"about\"'>\n    <div class='title'>{{title}}</div>\n    <ng-container ngProjectAs=\".menu\">\n        <ng-content select=\".menu\"></ng-content>\n    </ng-container>\n    <ng-container ngProjectAs=\".content\">\n        <mat-drawer-container>\n            <mat-drawer mode=\"side\" opened>\n                 <!-- [opened]='selectedFilter===null'> -->\n                <div class='nav-icon' *ngFor='let filter of filters' (click)='selectFilter(filter.id)'>\n                    <mat-icon [icon]=\"filter.icon\" aria-hidden=\"false\" [aria-label]=\"filter.title\">{{filter.icon}}</mat-icon>\n                    <label>{{filter.title}}</label>\n                </div>\n            </mat-drawer>\n            <mat-drawer-content>\n                <mat-drawer-container [autosize]='true'>\n                    <mat-drawer mode=\"over\" class='drawer-content' #drawer (closed)='selectedFilter = null'>\n                        <ng-content select='.content'></ng-content>\n                    </mat-drawer>\n                    <mat-drawer-content>\n                        <app-map-layer\n                            [style]='mapStyle'\n                            [interactionLayers]='interactionLayers'\n                            (map)='map.next($event)'\n                            (mapPopup)='mapPopup.next($event)'\n                        >\n                            <ng-content select='.top-bar'></ng-content>\n                        </app-map-layer>\n                    </mat-drawer-content>\n                </mat-drawer-container>\n            </mat-drawer-content>\n            <mat-drawer mode=\"side\" [opened]='!!popupProperties.wpdx_id || !!popupProperties.NAME_0' position='end' #popup>\n                <div class='popup-container'>\n                    <a class='close' (click)='mapPopup.next({})'>Close</a>\n                    <ng-content selector='.map-popup'></ng-content>\n                </div>\n            </mat-drawer>\n        </mat-drawer-container>\n        <app-about-panel [open]='panel === \"about\"' [logosKey]='id' (closed)='panel = \"\"'>\n            <div [innerHtml]='marked(about)'></div>\n        </app-about-panel>\n    </ng-container>\n</app-layout>\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './app-layout.component.html',\n  styleUrls: ['./app-layout.component.less']\n})\nexport class AppLayoutComponent {\n\n  @Output() info = new EventEmitter<void>();\n\n  constructor() { }\n\n}\n","<div class='app'>\n    <div class='header'>\n        <img class='logo' src='assets/img/logo.png'>\n        <h1><ng-content select='.title'></ng-content></h1>\n        <div class='info' (click)='info.emit()'>\n            <mat-icon aria-hidden=\"false\" aria-label=\"info icon\" fontSet='material-icons-outlined'>info</mat-icon>\n        </div>\n    </div>\n    <div class='content'>\n        <ng-content select='.content'></ng-content>\n    </div>\n    <div class='menu'>\n        <ng-content select=\".menu\"></ng-content>\n    </div>\n</div>\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { StateService } from '../state.service';\n\n@Component({\n  selector: 'app-attribute-filter',\n  templateUrl: './attribute-filter.component.html',\n  styleUrls: ['./attribute-filter.component.less']\n})\nexport class AttributeFilterComponent {\n\n  changed = new EventEmitter<any>();\n\n  sourceOptions = [\n    'Well',\n    'Spring',\n    'Rainwater Harvesting',\n    'Piped Water',\n    'Sand or Sub-surface Dam',\n    'Delivered Water',\n    'Surface Water',\n    'Packaged Water',\n  ];\n  techOptions = [\n    'Hand Pump',\n    'Mechanized Pump',\n    'Tapstand',\n    'Rope and Bucket',\n  ];\n  managementOptions = [\n    'Community Management',\n    'Direct Government Operation',\n    'Health Care Facility',\n    'No Management',\n    'Other Institutional Management',\n    'Private Operator/Delegated Management',\n    'Private Person',\n    'Religious Institution',\n    'School Management',\n    'Unknown',\n  ];\n\n\n  constructor(private state: StateService) {\n  }\n\n  set source(value: string) {\n    if (value) {\n      this.state.setProp('source', value);\n    } else {\n      this.state.removeProp('source');\n    }\n    this.sendState();\n  }\n\n  get source() {\n    return this.state.getProp('source') || null;\n  }\n\n  set tech(value: string) {\n    if (value) {\n      this.state.setProp('tech', value);\n    } else {\n      this.state.removeProp('tech');\n    }\n    this.sendState();\n  }\n\n  get tech() {\n    return this.state.getProp('tech') || null;\n  }\n\n  set management(value: string) {\n    if (value) {\n      this.state.setProp('management', value);\n    } else {\n      this.state.removeProp('management');\n    }\n    this.sendState();\n  }\n\n  get management() {\n    return this.state.getProp('management') || null;\n  }\n\n  sendState() {\n    const state = {\n      tech: this.tech,\n      source: this.source,\n      management: this.management,\n    };\n    this.changed.next(state);\n  }\n\n  nonempty(x) {\n    return x !== undefined && x !== null && Object.keys(x).length > 0;\n  }\n\n  clearVisible() {\n    return this.nonempty(this.tech) || this.nonempty(this.source) || this.nonempty(this.management);\n  }\n\n  clear() {\n    this.source = null;\n    this.tech = null;\n    this.management = null;\n  }\n\n}\n","<mat-card>\n    <mat-card-title i18n>Region</mat-card-title>\n    <mat-card-actions>\n        <mat-label i18n>Water Point Source</mat-label>\n        <mat-select [(value)]='source' multiple>\n            <mat-option *ngFor=\"let option of sourceOptions\" [value]=\"option\">\n            {{option}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <mat-card-actions>\n        <mat-label i18n>Water Point Tech</mat-label>\n        <mat-select [(value)]='tech' multiple>\n            <mat-option *ngFor=\"let option of techOptions\" [value]=\"option\">\n            {{option}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <mat-card-actions>\n        <mat-label i18n>Management</mat-label>\n        <mat-select [(value)]='management' multiple>\n            <mat-option *ngFor=\"let option of managementOptions\" [value]=\"option\">\n            {{option}}\n            </mat-option>\n        </mat-select>\n    </mat-card-actions>\n    <div class='clear' (click)='clear()' [class.visible]='clearVisible()'><mat-icon>clear</mat-icon>Clear</div>\n</mat-card>","import { AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport * as d3 from 'd3';\nimport { timer } from 'rxjs';\n\n@Component({\n  selector: 'app-bar',\n  templateUrl: './bar.component.html',\n  styleUrls: ['./bar.component.less']\n})\nexport class BarComponent implements OnChanges, AfterViewInit {\n  @Input() data: any;\n  @Input() xAxisTitle: string;\n  @Input() yAxisTitle: string;\n\n  @Input() min: number;\n  @Input() max: number;\n  @Input() color: string;\n\n\n  @ViewChild('bar') svgElement: ElementRef;\n\n  width = 0;\n  height = 0;\n  svg;\n  margin = {top: 20, right: 20, bottom: 70, left: 40};\n\n  constructor() { }\n\n  drawHistogram(){\n\n    const width = this.width - this.margin.left - this.margin.right;\n    const height = this.height - this.margin.top - this.margin.bottom;\n\n    this.svgElement.nativeElement.innerHTML = '';\n    this.svg = d3.select(this.svgElement.nativeElement)\n      .append('svg')\n      .attr('width', width + this.margin.left + this.margin.right)\n      .attr('height', height + this.margin.top + this.margin.bottom)\n      .append('g')\n      .attr('transform',\n            'translate(' + this.margin.left + ',' + this.margin.top + ')');\n\n    let tickNumber = 4;\n    let valueRange = this.max - this.min;\n    let consolidatedRange = d3.min([valueRange, this.data.length]);\n    if (consolidatedRange < 10){\n      tickNumber = consolidatedRange;\n    }\n    else {\n      tickNumber = 10;\n      if (valueRange % 10 !== 0){\n        const res = valueRange % 10;\n        this.max = this.max + (10-res);\n      }\n    }\n    const formatCount = d3.format(',.0f');\n\n    // create bins\n    const binWidth = valueRange / tickNumber;\n    const thresholds = d3.range(this.min, this.max + binWidth/10, binWidth);\n    const bins = d3.bin()\n        .value(d => d[0])\n        .domain([this.min, this.max])\n        .thresholds(thresholds);\n\n    const histogram = bins(this.data);\n    histogram.forEach((d: any) => {\n      d.count = d3.sum(d, g => g[1]);\n    });\n\n    // create x axis\n    const x = d3.scaleLinear()\n      .domain([this.min, this.max])\n      .range([0, width]);\n\n    // ticks\n    const xAxis = d3.axisBottom(x)\n      .tickValues(thresholds)\n      .tickFormat((d) => `${d}`);\n\n    // draw x axis\n    this.svg.append('g')\n          .attr('transform', 'translate(0,' + height + ')')\n          .call(xAxis)\n          .call(g => g.select('.domain').remove())\n          .selectAll('text')\n            .style('text-anchor', 'end')\n            .attr('dx', '-.8em')\n            .attr('dy', '.15em')\n            .attr('transform', 'rotate(-50)');\n\n\n    // create y axis\n    const y = d3.scaleLinear()\n        .range([height, 0])\n        .domain([0, d3.max(histogram as any[], (d) => d.count)]);\n\n    // draw bars\n    const bar = this.svg.selectAll('rect')\n         .data(histogram)\n         .enter().append('g')\n         .attr('class', 'bar')\n         .attr('transform', (d) => 'translate(' + x(d.x0) + ',' + y(d.count) + ')');\n\n    bar.append('rect')\n         .attr('x', 1)\n         .attr('width', width / tickNumber - 2)\n         .attr('height', (d) => height - y(d.count))\n         .style('fill', this.color);\n\n    // count\n    bar.append('text')\n      .attr('dy', '.75em')\n      .style('font-size', '10px')\n      .attr('y', -15)\n      .attr('x', (x(histogram[0].x1) - x(histogram[0].x0)) / 2)\n      .attr('text-anchor', 'middle')\n      .text( (d) => formatCount(d.count) !== (0+'') ? formatCount(d.count): '');\n\n    // x axis title\n    this.svg.append('text')\n      .attr('transform',\n            'translate(' + (width/2) + ' ,' +\n                           (height + this.margin.top + 25) + ')')\n      .style('text-anchor', 'middle')\n      .text(this.xAxisTitle);\n\n    // y axis title\n    this.svg.append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0 - this.margin.left)\n      .attr('x',0 - (height / 2))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text(this.yAxisTitle);\n  }\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const el = this.svgElement?.nativeElement as HTMLElement;\n    if (!el) {\n      return;\n    }\n    this.drawHistogram();\n  }\n\n  ngAfterViewInit() {\n    const el = this.svgElement?.nativeElement as HTMLElement;\n    if (!el) {\n      return;\n    }\n    timer(0).subscribe(() => {\n      this.width = el.offsetWidth;\n      this.height = el.offsetHeight;\n      this.ngOnChanges(null);\n  });\n  }\n}\n","<div class=\"bar-chart\" #bar></div>","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-base-waterpoint-popup',\n  templateUrl: './base-waterpoint-popup.component.html',\n  styleUrls: ['./base-waterpoint-popup.component.less']\n})\nexport class BaseWaterpointPopupComponent {\n\n  @Input() popupProperties: any;\n\n  constructor() { }\n}\n","<div class='popup-info' *ngIf='popupProperties.wpdx_id'>\n    <p *ngIf='popupProperties.wpdx_id'><label title='WPDX Id' i18n-title><mat-icon>tag</mat-icon></label> {{popupProperties.wpdx_id}}</p>\n    <p>\n        <label><mat-icon>place</mat-icon></label> \n        {{popupProperties.clean_country_name || popupProperties.country_name}} &gt; {{popupProperties.clean_adm1 || popupProperties.adm1}}  &gt; {{popupProperties.clean_adm2 || popupProperties.adm2}}  &gt; {{popupProperties.clean_adm3 || popupProperties.adm3}}  &gt; {{popupProperties.clean_adm4 || popupProperties.adm4}}\n        <a [href]='\"https://www.google.com/maps/@\" + (popupProperties.lat || popupProperties.lat_deg) + \",\" + (popupProperties.lon || popupProperties.lon_deg) + \",16z\"' target='_blank'><mat-icon>launch</mat-icon></a>\n    </p>\n    <p *ngIf='popupProperties.water_source_clean || popupProperties.water_source'><label title='Water Source' i18n-title><mat-icon>water</mat-icon></label> {{popupProperties.water_source_clean || popupProperties.water_source}}</p>\n    <p *ngIf='popupProperties.water_tech_clean || popupProperties.water_tech'><label title='Water Point Tech' i18n-title><mat-icon>settings</mat-icon></label> {{popupProperties.water_tech_clean || popupProperties.water_tech}}</p>\n    <ng-content></ng-content>\n    <p *ngIf='popupProperties.source'><label title='Data Source' i18n-title><mat-icon>wash</mat-icon></label> {{popupProperties.source}}</p>\n    <p *ngIf='popupProperties.management_clean || popupProperties.management'><label title='Management' i18n-title><mat-icon>corporate_fare</mat-icon></label>{{popupProperties.management_clean || popupProperties.management}}</p>\n    <p *ngIf='popupProperties.installer || popupProperties.install_year'>\n        <label title='Installation' i18n-title><mat-icon>construction</mat-icon></label>&nbsp;\n        <span>{{popupProperties.install_year}}</span>\n        <span *ngIf='popupProperties.installer && popupProperties.install_year' i18n>&nbsp;by&nbsp;</span>\n        <span>{{popupProperties.installer}}</span>\n    </p>\n    <p *ngIf='popupProperties.report_date'>\n        <label title='Report Date' i18n-title><mat-icon>edit_calendar</mat-icon></label>&nbsp;\n        <span>Reported <b *ngIf='popupProperties.status_id === \"Yes\"'>as Functional</b><b *ngIf='popupProperties.status_id === \"No\"'>as Non-functional</b> at</span>&nbsp;\n        <span>{{popupProperties.report_date}}</span>\n    </p>\n    <p *ngIf='popupProperties.status_clean && popupProperties.status_clean !== \"Functional\" && popupProperties.status_clean !== \"Non-Functional\"'>\n        <label title='Status Detail' i18n-title><mat-icon>add_box</mat-icon>Status Detail:</label>&nbsp;\n        <span>{{popupProperties.status_clean}}</span>\n    </p>\n\n</div>\n<ng-container *ngIf='popupProperties.history'>\n    <app-photo-gallery [history] = 'popupProperties.history'></app-photo-gallery>\n</ng-container>  \n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AppLayoutComponent } from './app-layout/app-layout.component';\nimport { MapLayerComponent } from './map-layer/map-layer.component';\nimport { AdmSelectorComponent } from './adm-selector/adm-selector.component';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatButtonModule } from '@angular/material/button';\nimport { SidePanelComponent } from './side-panel/side-panel.component';\nimport { AboutPanelComponent } from './about-panel/about-panel.component';\nimport { LogosBarComponent } from './logos-bar/logos-bar.component';\nimport { AirtableLayoutComponent } from './airtable-layout/airtable-layout.component';\nimport { AirtableService } from '../airtable.service';\nimport { LegendControlComponent } from './controls/legend-control/legend-control.component';\nimport { CustomSelectorComponent } from './controls/custom-selector/custom-selector.component';\nimport { FiltersControlComponent } from './controls/filters-control/filters-control.component';\nimport { ControlsComponent } from './controls/controls/controls.component';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { AttributeFilterComponent } from './attribute-filter/attribute-filter.component';\nimport { BaseWaterpointPopupComponent } from './base-waterpoint-popup/base-waterpoint-popup.component';\nimport { PhotoGalleryComponent } from './photo-gallery/photo-gallery.component';\nimport { BarComponent } from './bar/bar.component';\nimport { StalenessPopupBarComponent } from './staleness-popup-bar/staleness-popup-bar.component';\nimport { PieComponent } from './pie/pie.component';\nimport { SparkLineComponent } from './spark-line/spark-line.component';\nimport { AdmSearchBarComponent } from './adm-search-bar/adm-search-bar.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nexport { StateService } from './state.service';\n\n\n@NgModule({\n  declarations: [\n    AppLayoutComponent,\n    MapLayerComponent,\n    AdmSelectorComponent,\n    SidePanelComponent,\n    AboutPanelComponent,\n    LogosBarComponent,\n    AirtableLayoutComponent,\n    LegendControlComponent,\n    CustomSelectorComponent,\n    FiltersControlComponent,\n    ControlsComponent,\n    AttributeFilterComponent,\n    BaseWaterpointPopupComponent,\n    PhotoGalleryComponent,\n    BarComponent,\n    StalenessPopupBarComponent,\n    SparkLineComponent,\n    PieComponent,\n    AdmSearchBarComponent\n  ],\n  imports: [\n    CommonModule,\n    MatCardModule,\n    MatSelectModule,\n    MatIconModule,\n    MatButtonToggleModule,\n    MatAutocompleteModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatExpansionModule,\n    MatSidenavModule,\n    MatMenuModule,\n    MatButtonModule,\n    ReactiveFormsModule,\n    FormsModule\n  ],\n  exports: [\n    AppLayoutComponent,\n    MapLayerComponent,\n    AdmSelectorComponent,\n    AttributeFilterComponent,\n    SidePanelComponent,\n    AboutPanelComponent,\n    AirtableLayoutComponent,\n    LegendControlComponent,\n    CustomSelectorComponent,\n    FiltersControlComponent,\n    ControlsComponent,\n    BaseWaterpointPopupComponent,\n    PhotoGalleryComponent,\n    BarComponent,\n    StalenessPopupBarComponent,\n    SparkLineComponent,\n    PieComponent,\n    AdmSearchBarComponent\n  ]\n})\nexport class CommonComponentsModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-controls',\n  templateUrl: './controls.component.html',\n  styleUrls: ['./controls.component.less']\n})\nexport class ControlsComponent {\n\n  constructor() { }\n\n}\n","<div class='controls'>\n    <ng-content></ng-content>\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n\n\n@Component({\n  selector: 'app-custom-selector',\n  templateUrl: './custom-selector.component.html',\n  styleUrls: ['./custom-selector.component.less']\n})\nexport class CustomSelectorComponent {\n\n  @Input() title: string;\n  @Input() value: string;\n  @Input() options: {value: string; display: string}[] = [];\n  @Output() valueChange = new EventEmitter<string>();\n\n  constructor() { }\n\n  get _value() {\n    return this.value;\n  }\n\n  set _value(value) {\n    this.value = value;\n    this.valueChange.emit(value);\n  }\n\n}\n","<mat-card>\n    <mat-card-title i18n>{{title}}</mat-card-title>\n    <mat-card-actions>\n        <mat-select [(value)]='_value'>\n            <mat-option *ngFor='let o of options' [value]='o.value'>{{o.display}}</mat-option>\n        </mat-select>                \n    </mat-card-actions>\n</mat-card>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-filters-control',\n  templateUrl: './filters-control.component.html',\n  styleUrls: ['./filters-control.component.less']\n})\nexport class FiltersControlComponent {\n\n  constructor() { }\n\n}\n","<mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title>\n        <strong>Filter & Search</strong>\n      </mat-panel-title>\n      <mat-panel-description>\n        <mat-icon fontSet='material-icons-outlined'>filter_alt</mat-icon>\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n\n    <div>\n        <ng-content></ng-content>\n    </div>\n</mat-expansion-panel>\n<p></p>\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-legend-control',\n  templateUrl: './legend-control.component.html',\n  styleUrls: ['./legend-control.component.less']\n})\nexport class LegendControlComponent {\n\n  @Input() title = 'Legend';\n  @Input() expanded = true;\n\n  constructor() { }\n\n}\n","<mat-expansion-panel [expanded]='expanded'>\n    <mat-expansion-panel-header>\n        <mat-panel-title>\n            <strong>{{title}}</strong>\n        </mat-panel-title>\n    </mat-expansion-panel-header>\n    <ng-content></ng-content>\n</mat-expansion-panel>\n<p></p>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { AirtableService } from '../../airtable.service';\n\n@Component({\n  selector: 'app-logos-bar',\n  templateUrl: './logos-bar.component.html',\n  styleUrls: ['./logos-bar.component.less']\n})\nexport class LogosBarComponent implements OnInit {\n\n  @Input() logosKey: string;\n\n  logos = [];\n\n  constructor(private airtable: AirtableService) { }\n\n  ngOnInit(): void {\n    if (this.logosKey) {\n      this.airtable.fetchLogos(this.logosKey).subscribe((logos) => {\n        this.logos = logos;\n      });\n    }\n  }\n\n}\n","<div class='logos'>\n    <div class='logo' *ngFor='let logo of logos'>\n        <a [href]='logo.url' [title]='logo.name' target=\"_blank\">\n            <img [src]='logo.logo[0].thumbnails.large.url'>\n        </a>\n    </div>\n</div>","import * as mapboxgl from 'mapbox-gl';\nimport * as turf from '@turf/turf';\n\nimport { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnChanges, OnInit, Output, ViewChild } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { StateService } from '../state.service';\n\n@Component({\n  selector: 'app-map-layer',\n  templateUrl: './map-layer.component.html',\n  styleUrls: ['./map-layer.component.less']\n})\nexport class MapLayerComponent implements OnChanges, AfterViewInit {\n\n  @Input() style: string;\n  @Input() interactionLayers: string[];\n  @Output() map = new EventEmitter<mapboxgl.Map>();\n  @Output() mapPopup = new EventEmitter<any>();\n\n  @ViewChild('map') mapEl: ElementRef;\n\n  created = new ReplaySubject<HTMLElement>(1);\n\n  ACCESS_TOKEN = 'pk.eyJ1Ijoid3BkeCIsImEiOiJja2ptdDljN3kwbHpsMnpxcHJvdDlmbTF1In0.vXVq027cJzHuy7Xa_tAkWQ';\n  COUNTRY_CODES = [\n    'sle',\n    'lbr',\n    'uga',\n    'eth',\n    'gha',\n    'bfa',\n    'afg',\n    'bgd',\n    'hti',\n    'ind',\n    'ken',\n    'mwi',\n    'mli',\n    'nga',\n    'ssd',\n    'tza',\n    'zwe',\n  ];\n\n  _map: mapboxgl.Map;\n  mapboxgl: any = mapboxgl;\n  popupProperties: any = {};\n\n  constructor(private el: ElementRef, private state: StateService) {\n  }\n\n  ngAfterViewInit() {\n    this.created.next(this.mapEl.nativeElement as HTMLElement);\n  }\n\n  ngOnChanges(): void {\n    if (!this._map && this.style) {\n      this.created.pipe(first()).subscribe(\n        (mapEl) => {\n          console.log('MAPBOX', this.style, this.interactionLayers, this.mapboxgl);\n          this.mapboxgl.accessToken = this.ACCESS_TOKEN;\n          this._map = new mapboxgl.Map({\n            container: mapEl,\n            style: this.style,\n            center: [0, 0],\n            zoom: 2\n          });\n          this._map.on('style.load', () => {\n            for (const layer of this.interactionLayers) {\n              this._map.setLayoutProperty(layer, 'visibility', 'visible');\n              this._map.on('click', layer, (e) => {\n                this.popupProperties = e.features[0].properties;\n                if (e.features[0].geometry.type === 'Point') {\n                  this.popupProperties.coordinates = (e.features[0].geometry as GeoJSON.Point).coordinates.slice();\n                } else if (e.features[0].geometry.type.indexOf('Polygon') > -1) {\n                  const features = {\n                    type: 'FeatureCollection',\n                    features: e.features\n                  };\n                  const centerPoint = turf.center(features as GeoJSON.FeatureCollection<any>);\n                  this.popupProperties.coordinates = centerPoint.geometry.coordinates.slice();\n                }\n                this.popupProperties.x = this.popupProperties.coordinates[0];\n                this.popupProperties.y = this.popupProperties.coordinates[1];\n                this.mapPopup.next(this.popupProperties);\n                if (e.stopPropagation) {\n                  e.stopPropagation();\n                }\n              });\n              this._map.on('mouseenter', layer, () => {\n                this._map.getCanvas().style.cursor = 'pointer';\n              });\n              // Change it back to a pointer when it leaves.\n              this._map.on('mouseleave', layer, () => {\n                this._map.getCanvas().style.cursor = '';\n              });\n            }\n            const populationLayers: string[] = [];\n            for (const country of this.COUNTRY_CODES) {\n              this._map.addSource(`wpdx.pop_${country}`, {\n                type: 'raster', url: `mapbox://wpdx.pop_${country}`\n              });\n              const layerName = `population_${country}`;\n              this._map.addLayer({\n                id: layerName,\n                type: 'raster',\n                source: `wpdx.pop_${country}`,\n                minzoom: 7,\n                maxzoom: 22,\n                paint: {\n                  'raster-opacity': 0.3,\n                  'raster-saturation': 0.99\n                }\n              }, 'land-structure-polygon');\n              populationLayers.push(layerName);\n            }\n            this.state.populationLayers = populationLayers;\n            const scale = new mapboxgl.ScaleControl({\n              maxWidth: 250,\n              unit: 'metric'\n            });\n            this._map.addControl(scale, 'bottom-right');\n            this._map.addControl(new mapboxgl.NavigationControl({showCompass: false}), 'bottom-right');\n            this._map.dragRotate.disable();\n            this.map.next(this._map);\n\n          });\n        }\n      );\n    }\n  }\n\n}\n","<div class='top-bar'>\n    <ng-content></ng-content>\n</div>\n<div #map class='map'></div>\n","import { Component, Input, OnChanges, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-photo-gallery',\n  templateUrl: './photo-gallery.component.html',\n  styleUrls: ['./photo-gallery.component.less']\n})\nexport class PhotoGalleryComponent implements OnChanges {\n\n  @Input() history: any;\n  currentPhotoIndex = 0;\n  photoList: any[] = [];\n  maxIndex = 0;\n  \n\n  constructor() { }\n\n\n  ngOnChanges(): void {\n    if (this.history) {\n      this.photoList = Object.keys(this.history)\n        .sort((a: string, b: string) => a.localeCompare(b))\n        .map((k: any) => this.history[k].photo_lnk)\n        .filter((x) => !!x);\n      this.maxIndex = this.photoList.length; \n    }\n  }\n\n  moveRight(){\n    if (this.currentPhotoIndex < this.maxIndex - 1) {\n      this.currentPhotoIndex += 1;\n    }\n  }\n  \n  moveLeft(){\n    if (this.currentPhotoIndex > 0){\n      this.currentPhotoIndex -= 1;\n    }\n  }\n\n  removePhoto(link) {\n    this.photoList = this.photoList.filter((x) => x !== link);\n    this.maxIndex = this.photoList.length;\n  }\n\n}\n","<div *ngIf='photoList.length > 0' class='photo-gallery'>\n    <ng-container *ngFor='let photo of photoList; let i = index'>\n        <div class='photo' [class.current-photo]='i === currentPhotoIndex' [class.left]='i < currentPhotoIndex' [class.right]='i > currentPhotoIndex'>\n            <img [src]='photo' (error)='removePhoto(photo)'>\n        </div>  \n    </ng-container>    \n    <ng-container *ngIf='photoList.length > 1'>\n        <mat-icon (click) ='moveLeft()'>arrow_back</mat-icon>\n        <mat-icon (click)='moveRight()' class='forward'>arrow_forward</mat-icon>\n    </ng-container>\n</div>\n","import { AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'app-pie',\n  templateUrl: './pie.component.html',\n  styleUrls: ['./pie.component.less']\n})\nexport class PieComponent implements OnChanges, AfterViewInit {\n\n  @ViewChild('pie') svgElement: ElementRef;\n  @Input() data: any;\n\n  chartId;\n  svg;\n  mySvg;\n  margin = 5;\n  width = 0;\n  height = 0;\n\n  radius = 0;\n  colors;\n\n  constructor() { }\n\n  createSvg(): void {\n    this.svgElement.nativeElement.innerHTML = '';\n    this.mySvg = d3\n      .select(this.svgElement.nativeElement)\n      .append('svg')\n      .attr('viewBox', `0 0 ${this.width} ${this.height}`)\n      .attr('width', this.width)\n      .attr('height', this.height)\n    this.svg = this.mySvg\n      .append('g')\n      .attr(\n        'transform',\n        'translate(' + (this.radius + this.margin) + ',' + this.height / 2 + ')'\n      );\n  }\n\n  createColors(data = this.data): void {\n    this.colors = d3\n      .scaleOrdinal()\n      .domain(data.map(d => d.value.toString()))\n      .range(d3.schemePastel1);\n  }\n\n  drawChart(data=this.data){\n    // Compute the position of each group on the pie\n    const pie = d3.pie<any>().value((d: any) => Number(d.value));\n    const dataReady = pie(data);\n\n    this.svg\n      .selectAll('pieces')\n      .data(dataReady)\n      .enter()\n      .append('path')\n      .attr(\n        'd',\n        d3\n          .arc()\n          .innerRadius(0)\n          .outerRadius(this.radius)\n      )\n      .attr('fill', (d, i) => (d.data.color ? d.data.color : this.colors(i)))\n      .attr('stroke', '#121926')\n      .style('stroke-width', '1px');\n\n    const legendG = this.mySvg.selectAll('.legend') // note appending it to mySvg and not svg to make positioning easier\n      .data(pie(data))\n      .enter().append('g')\n      .attr('transform', (d,i) =>\n        'translate(' + (this.radius * 2 + this.margin * 2) + ',' + (i * 16) + ')')\n      .attr('class', 'legend');\n\n\n    legendG.append('rect') // make a matching color rect\n      .attr('y', 10)\n      .attr('width', 14)\n      .attr('height', 14)\n      .attr('fill', (d, i) => this.colors(i));\n\n    legendG.append('text') // add the text\n      .text((d) => d.value.toLocaleString('en-US') + '  ' + d.data.name)\n      .style('font-size', '12px')\n      .attr('y', 21)\n      .attr('x', 20);\n\n  }\n\n\n\n  ngOnChanges(): void {\n    const el: HTMLElement = this.svgElement?.nativeElement;\n    if (!el) {\n      return;\n    }\n    this.width = el.offsetWidth;\n    this.height = el.offsetHeight;\n    this.radius = this.height * 0.4 - this.margin;\n    this.createSvg();\n    this.createColors();\n    this.data = this.data.sort((a,b) => (a.value < b.value) ? 1 : ((b.value < a.value) ? -1 : 0));\n    this.drawChart();\n  }\n\n  ngAfterViewInit() {\n    this.ngOnChanges();\n  }\n\n}\n","<div class=\"pie\" #pie></div>\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-side-panel',\n  templateUrl: './side-panel.component.html',\n  styleUrls: ['./side-panel.component.less']\n})\nexport class SidePanelComponent {\n\n  @Input() open = false;\n  @Input() position = 'right';\n\n  constructor() { }\n\n}\n","<div class='panel'\n     [class.open]='open'\n     [class.top]='position === \"top\"'\n     [class.bottom]='position === \"bottom\"'\n     [class.left]='position === \"left\"'\n     [class.right]='position === \"right\"'\n>\n    <ng-content></ng-content>\n</div>","import { AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'app-spark-line',\n  templateUrl: './spark-line.component.html',\n  styleUrls: ['./spark-line.component.less']\n})\nexport class SparkLineComponent implements OnChanges, AfterViewInit {\n\n  @Input() popupProperties;\n  @Input() fields: string[];\n  @Input() percent = true;\n  @ViewChild('chart') svgElement: ElementRef;\n  svg;\n\n  margin = {top: 10, right: 10, bottom: 20, left: 40};\n  width = 360;\n  height = 120;\n\n  innerWidth  = this.width - this.margin.left - this.margin.right;\n  innerHeight = this.height - this.margin.top - this.margin.bottom;\n  dataCount = 9;\n  \n  constructor() { }\n\n  createSvg(): void{\n    this.svgElement.nativeElement.innerHTML = '';\n    this.svg = d3.select('figure.chart')\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .append('g')\n      .attr('transform',\n          'translate(' + this.margin.left + ',' + this.margin.top + ')');\n  }\n\n  drawLine(){\n    const x = d3.scaleLinear().domain([0, this.dataCount]).range([0, this.innerWidth]);\n    const fieldNames = this.fields.map(f => f.split(':')[0]);\n    const maxes = fieldNames.map(f => d3.max(this.popupProperties[f] as number[]));\n    let maxValue: number = d3.max(maxes);\n    maxValue = this.percent ? d3.max([maxValue, 100]) : maxValue;\n    const y = d3.scaleLinear().domain([0, maxValue]).range([this.innerHeight, 0]);\n    const line: any = d3.line()\n          .x((d: any, i: any) => x(i))\n          .y((d: any) => y(d));\n\n    this.svg.append('g')\n      .attr('transform', 'translate(0,' + this.innerHeight + ')')\n      .call(d3.axisBottom(x).tickFormat((x) => x === 0 ? 'today' : `+${x}y`));\n\n    const yAxis = d3.axisLeft(y);\n    if (maxValue === 100) {\n      yAxis.tickValues([0, 25, 50, 75, 100]);\n    }\n    this.svg.append('g').call(yAxis);\n    \n    for (const field of this.fields) {\n      const parts = field.split(':');\n      const fieldName = parts[0];\n      const color = parts[1];\n      if (this.popupProperties[fieldName]) {\n        this.svg.append('path')\n          .datum(this.popupProperties[fieldName])\n          .attr('fill', 'none')\n          .attr('stroke', color)\n          .attr('stroke-width', 1)\n          .attr('d', line);\n      }\n    }\n  }\n\n  ngOnChanges(): void {\n    if (!this.svgElement?.nativeElement) {\n      return;\n    }\n    this.createSvg();\n    this.drawLine();\n  }\n\n  ngAfterViewInit() {\n    this.ngOnChanges();\n  }\n\n}\n","<figure class=\"chart\" #chart></figure>\n","import { AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'app-staleness-popup-bar',\n  templateUrl: './staleness-popup-bar.component.html',\n  styleUrls: ['./staleness-popup-bar.component.less']\n})\nexport class StalenessPopupBarComponent implements OnChanges {\n\n  @Input() popupProperties: any;\n\n  data: any[] = [];\n\n  constructor() { }\n\n  ngOnChanges() {\n    if (this.popupProperties) {\n      this.data = [\n        [3, this.popupProperties.age_under_5],\n        [7, this.popupProperties.age_under_10],\n        [13, this.popupProperties.age_under_15],\n        [17, this.popupProperties.age_above_15],\n      ];\n\n    }\n  }\n}\n","<label>Water Point Report Age Distribution</label>\n<app-bar [data]='data'\n        xAxisTitle='Age in Years' yAxisTitle='# Water Points' [min] = '0' [max] = '20'\n        color='#756bb1'></app-bar>","import { Location } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport * as mapboxgl from 'mapbox-gl';\nimport { fromEvent, ReplaySubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StateService {\n\n  props: any = {};\n  bounds: mapboxgl.LngLatBounds = null;\n  userBounds = false;\n  populationLayers: string[] = [];\n\n  public changed = new ReplaySubject<{props: any; bounds: mapboxgl.LngLatBounds; userBounds: boolean}>(1);\n\n  constructor(private loc: Location) {\n    fromEvent(window, 'popstate').subscribe(() => {\n      this.loadFromUrl();\n    });\n    this.loadFromUrl();\n    // console.log('INIT', this.props, this.bounds);\n  }\n\n  loadFromUrl() {\n    const params = new URLSearchParams(location.search);\n    params.forEach((value, key) => {\n      const parsed: any = JSON.parse(value);\n      if (key !== 'bounds') {\n        this.props[key] = parsed;\n      } else {\n        this.bounds = new mapboxgl.LngLatBounds(parsed);\n      }\n    });\n    this.changed.next({props: this.props, bounds: this.bounds, userBounds: this.userBounds});\n  }\n\n  setBounds(value, userBounds?) {\n    this.bounds = value;\n    this.userBounds = userBounds;\n    this.bump();\n  }\n\n  defaultValue(key, value) {\n    if (!this.hasProp(key)) {\n      this.setProp(key, value);\n    }\n  }\n\n  hasProp(key) {\n    return this.props.hasOwnProperty(key);\n  }\n\n  setProp(key, value) {\n    this.props[key] = value;\n    this.bump();\n  }\n\n  removeProp(key) {\n    delete this.props[key];\n    this.bump();\n  }\n\n  getProp(key) {\n    return this.props[key];\n  }\n\n  bump() {\n    const _state = Object.assign({}, this.props, {bounds: this.bounds?.toArray()});\n    const state = {};\n    for (const key of Object.keys(_state)) {\n      if (_state[key] !== undefined) {\n        state[key] = JSON.stringify(_state[key]);\n      }\n    }\n    const params = new URLSearchParams(state);\n    // this.loc.replaceState(location.pathname, params.toString());\n    history.pushState(null, null, location.pathname + '?' + params.toString());\n    this.changed.next({props: this.props, bounds: this.bounds, userBounds: this.userBounds});\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { forkJoin, from, ReplaySubject } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DbService {\n\n  cache: any = {};\n  fetchAdmLevelsResult = new ReplaySubject(1);\n\n  constructor(private http: HttpClient) {\n    this.fetchAdmLevels().subscribe(\n      (result) => {\n        this.fetchAdmLevelsResult.next(result);\n        this.fetchAdmLevelsResult.complete();\n      }\n    );\n  }\n\n  b64EncodeUnicode(str) {\n    return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => String.fromCharCode(parseInt(p1, 16))))\n  }\n\n  query(raw_sql, cache?, page?, page_size?) {\n    // console.log('QUERYING', raw_sql);\n    const sql = this.b64EncodeUnicode(raw_sql)\n    let key = sql;\n    const params: any = {\n    };\n    if (page) {\n      key += `/${page}`;\n      params.page = page;\n    }\n    if (page_size) {\n      key += `/${page_size}`;\n      params.page_size = page_size;\n    }\n    if (cache && this.cache[key]) {\n      return from([this.cache[key]]);\n    }\n    return this.http.get('https://upload.waterpointdata.org/api/db/query?query=' + encodeURIComponent(sql), {params}).pipe(\n      tap((result) => {\n        if (cache) {\n          this.cache[key] = result;\n        }\n      })\n    );\n  }\n\n  download(sql, format, fileName, headers) {\n    sql = encodeURIComponent(btoa(sql));\n    return 'https://upload.waterpointdata.org/api/db/download?query=' + sql +\n            '&format=' + format +\n            '&filename=' + encodeURIComponent(fileName) +\n            '&headers=' + encodeURIComponent(headers.join(';'));\n\n  }\n\n  fetchAdmLevels() {\n    const query = `\n      SELECT \"NAME_0\" as clean_country_name,\n             \"NAME_1\" as clean_adm1, \n             \"NAME_2\" as clean_adm2,\n             coalesce(\"NAME_3\", '-') as clean_adm3, \n             coalesce(\"NAME_4\", '-') as clean_adm4,\n             bounds\n      FROM adm_analysis\n      WHERE adm_level = 'best'\n      ORDER BY 1,2,3,4,5\n    `;\n    return forkJoin([0, 1].map((i) => this.query(query, true, i, 10000))).pipe(\n      map((results) => {\n        const ret: any[] = [];\n        for (const result of results) {\n          ret.push(...result.rows);\n        }\n        return ret;\n      })\n    );\n  }\n\n  fetchByAdmLevel(adm_level){\n    const query = `\n      SELECT \"NAME_0\" as clean_country_name,\n             \"NAME_1\" as clean_adm1, \n             \"NAME_2\" as clean_adm2,\n             \"NAME_3\" as clean_adm3, \n             \"NAME_4\" as clean_adm4,\n             bounds\n      FROM adm_analysis\n      WHERE adm_level = '${adm_level}'\n      ORDER BY 1,2,3,4,5\n    `;\n    return forkJoin([0, 1].map((i) => this.query(query, true, i, 10000))).pipe(\n      map((results) => {\n        const ret: any[] = [];\n        if (results[0].pages === 1){\n          ret.push(...results[0].rows);\n        } else {\n          for (const result of results) {\n            ret.push(...result.rows);\n          }\n        }\n        return ret;\n      })\n    );\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FirstTimeService {\n\n  constructor() { }\n\n  firstTime(service) {\n    const key = 'WPDX-FT-' + service;\n    if (!localStorage.getItem(key)) {\n      localStorage.setItem(key, 'TRUE');\n      return true;\n    }\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayoutService {\n\n  constructor() { }\n\n  mobile() {\n    return window.innerWidth <= 600;\n  }\n\n  desktop() {\n    return window.innerWidth > 600;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-main-page',\n  templateUrl: './main-page.component.html',\n  styleUrls: ['./main-page.component.less']\n})\nexport class MainPageComponent {\n\n  constructor() { }\n\n}\n","<p><a href='/status-predictions/'>Status Predictions</a></p>\n<p><a href='/rehab-prio'>Rehab Priority</a></p>\n<p><a href='/rehab-prio/preview'>Rehab Priority Preview</a></p>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///"}